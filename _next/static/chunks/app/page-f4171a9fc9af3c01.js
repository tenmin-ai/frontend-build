(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3958:function(e,t,s){Promise.resolve().then(s.bind(s,6774))},1980:function(e,t,s){"use strict";s.d(t,{AuthProvider:function(){return o},E:function(){return d}});var l=s(7437),n=s(2265),a=s(6463),r=s(750),i=s(3061);let c=(0,n.createContext)(void 0),o=e=>{let{children:t}=e,s=(0,i.useIsClient)(),[o,d]=(0,n.useState)([]),[x,m]=(0,n.useState)(null),[u,h]=(0,n.useState)([]),b="https://backend-us.tenmin.ai";(0,n.useEffect)(()=>{(async()=>{try{let e=await fetch(b+"/tutors"),t=await e.json();d(t.map(e=>({...e.tutor,lessons:e.lessons})))}catch(e){console.error("Error fetching data:",e)}})()},[b]);let[f,g]=(0,r._)("token","",{initializeWithValue:!1}),j=(0,a.useRouter)(),p=async e=>{try{let t=await fetch(b+"/user",{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}),s=await t.json();console.log(s),m(JSON.parse(s))}catch(e){console.error("Error fetching data:",e)}};return((0,n.useEffect)(()=>{f||j.push("/login"),p(f)},[f,j]),s)?(0,l.jsx)(c.Provider,{value:{token:f,saveToken:g,backend_url:"wss://backend-us.tenmin.ai/ws",tutors:o,user:x,fetchUserData:p,availableTutors:u,setAvailableTutors:h},children:t}):(0,l.jsx)("main",{className:"bg-[#0039FF] h-screen w-screen flex justify-center items-center",children:(0,l.jsx)("img",{src:"tenmin_new_logo_white.svg",alt:"",className:"w-10"})})},d=()=>{let e=(0,n.useContext)(c);if(!e)throw Error("useAuthContext must be used within an AuthProvider");return e}},6774:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var l=s(7437),n=s(2265),a=s(6920),r=s(5079),i=s(6463),c=s(1980),o=s(2793);function d(){let[e,t]=(0,n.useState)("Speak"),[s,d]=(0,n.useState)(!1),[x,m]=(0,n.useState)("German"),[u,h]=(0,n.useState)(""),b=(0,i.useRouter)(),f="https://backend-us.tenmin.ai",{token:g,backend_url:j,tutors:p,user:N,availableTutors:k,setAvailableTutors:F}=(0,c.E)(),w=e=>{switch(e){case"German":return p.filter(e=>"de"===e.language);case"English":return p.filter(e=>"en-US"===e.language);default:return[]}};(0,n.useEffect)(()=>{N&&N.language&&(m(N.language),F(w(N.language)))},[N]);let v=async e=>{if(x===e)return;F(w(e));let t={language:e};console.log(JSON.stringify(t)),console.log(await fetch(f+"/update_user/"+N.id,{method:"PUT",headers:{accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}))},y=(e,t)=>{b.push("/callPage?lesson_id="+e+"&tutor_id="+t)};return(0,l.jsxs)("main",{className:"flex flex-col bg-gradient-to-b from-[#F6F8FF] to-[#F7F8FD] h-screen pt-14 pb-4 px-7 justify-between tracking-[-0.02em]",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("button",{className:"flex items-center",onClick:()=>d(!0),children:[(0,l.jsx)("div",{className:"text-black font-bold text-2xl mr-2",children:x}),(0,l.jsx)("div",{className:"text-sm",children:"▼"})]}),(0,l.jsxs)(o.y,{isOpen:s,onClose:()=>d(!1),detent:"content-height",tweenConfig:{ease:"easeInOut",duration:.3},children:[(0,l.jsxs)(o.y.Container,{children:[(0,l.jsx)(o.y.Header,{style:{background:"#F6F8FF"}}),(0,l.jsx)(o.y.Content,{style:{backgroundImage:"linear-gradient(to bottom, #F6F8FF, #F7F8FD)"},children:(0,l.jsxs)("div",{className:"p-8 pb-16 text-black",children:[(0,l.jsx)("p",{className:"font-bold text-2xl mb-7",children:"What would you like to learn?"}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("button",{className:"text-lg border-[1px] border-black/10 p-4 rounded-lg mb-4 bg-white",onClick:()=>{m("German"),v("German"),d(!1)},children:"\uD83C\uDDE9\uD83C\uDDEA German"}),(0,l.jsx)("button",{className:"text-lg border-[1px] border-black/10 p-4 rounded-lg mb-4 bg-white",onClick:()=>{m("English"),v("English"),d(!1)},children:"\uD83C\uDDEC\uD83C\uDDE7 English"})]})]})})]}),(0,l.jsx)(o.y.Backdrop,{onTap:()=>{d(!1)}})]})]}),(0,l.jsx)("div",{className:"flex-1 overflow-y-auto mt-8 scrollbar-hide pb-20",children:k.map((e,t)=>(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"bg-white rounded-lg py-7 px-7 mb-8 border-[1px] border-black/10",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-black/50 text-xs",children:"Today"}),(0,l.jsxs)("p",{className:"text-[1.375rem] leading-7 font-bold text-black mt-2",children:[x," with ",(0,l.jsx)("br",{})," ",e.name]}),(0,l.jsx)("div",{className:"text-black/50 text-[0.938rem] mt-2",children:"Meet your new tutor!"})]}),(0,l.jsx)("img",{src:e.profile_picture_url,alt:e.name,className:"w-20 h-20 rounded-full"})]}),(0,l.jsxs)("div",{className:"flex gap-3 mt-5",children:[(0,l.jsx)("button",{className:"text-white bg-[#0039FF] py-3 w-full rounded-lg flex items-center justify-center",onClick:()=>{console.log(e.lessons),y(e.lessons[0].id,e._id)},children:(0,l.jsx)("p",{className:"text-base font-bold",children:"Start next lesson"})}),e.lessons.length>1&&(0,l.jsx)("button",{className:"bg-black bg-opacity-[0.12] py-2 px-4 rounded-lg",onClick:async()=>{console.log("backend",f,g),await fetch(f+"/reset/"+e._id,{method:"POST",headers:{Authorization:"Bearer ".concat(g)}}),window.location.reload()},children:(0,l.jsx)(a.G,{icon:r.X7o,className:"text-lg mt-1"})})]})]},t),(0,l.jsx)("div",{className:"mb-4 font-bold",children:"Next lessons"}),1===e.lessons.length?(0,l.jsxs)("div",{className:"bg-[#0039FF]/10 rounded-lg py-6 px-6 mb-8 border-[1px] border-[#0039FF]/15 text-normal text-[#0039FF]",children:[(0,l.jsxs)("div",{className:"flex items-center mb-1 font-bold ",children:[(0,l.jsx)("img",{className:"mr-3",src:"/tenmin_new_logo.svg",alt:"Tenmin Logo"}),"Welcome, ",N.nickname,"!"]}),(0,l.jsx)("div",{children:"Get started by calling your tutor to generate your lesson plan!"})]},"asdfasdf"):(0,l.jsx)("div",{children:e.lessons.map((t,s)=>(0,l.jsxs)("button",{className:"bg-white rounded-lg py-6 px-6 border-[1px] border-[#DADADA] w-full mb-3",onClick:()=>{h(u===t.id?"":t.id)},children:[(0,l.jsxs)("div",{className:"flex justify-between items-start gap-3",children:[(0,l.jsxs)("div",{className:"flex flex-col items-start",children:[(0,l.jsx)("p",{className:"text-black font-bold text-base text-left",children:0===s?"Vocab \uD83D\uDCDA":1===s?"Debate \uD83C\uDF54":2===s?"Speaking \uD83C\uDF99️":"Lesson"}),(0,l.jsx)("div",{className:"overflow-hidden transition-max-height duration-300 ease-in-out mt-0.5 ".concat(u===t.id?"max-h-16":"max-h-5"),children:(0,l.jsx)("p",{className:"text-black/50 text-left text-[0.938rem]",children:t.title})})]}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsxs)("div",{className:"flex flex-col items-start",children:[(0,l.jsx)("p",{className:"text-black font-bold text-base",children:"\xa0"}),(0,l.jsx)("p",{className:"text-black/50 text-left text-[0.938rem] line-clamp-1",children:"\xa0"})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("div",{className:"bg-black/50 w-6 h-[1px] rounded-full"}),(0,l.jsx)("div",{className:"bg-black/50 w-6 h-[1px] rounded-full"})]})]})]}),(0,l.jsx)("div",{className:"overflow-hidden transition-all duration-700 ease-in-out ".concat(u===t.id?"max-h-96":"max-h-0"),children:(0,l.jsxs)("div",{className:"w-full text-left mt-2",children:[(0,l.jsx)("p",{className:"text-[0.938rem] text-[#0039FF]/50",children:"Time: 10min"}),(0,l.jsx)("p",{className:"text-[0.938rem] text-[#0039FF]/50",children:"Learning goal: TBD"}),(0,l.jsx)("button",{className:"text-[#0039FF] text-base bg-[#0039FF]/5 border-[1px] border-[#0039FF] py-3 w-full rounded-lg flex items-center justify-center mt-3 font-semibold",onClick:()=>y(t.id,e._id),children:"Start this lesson"}),(0,l.jsx)("button",{className:"text-black text-base bg-white border-[1px] border-[#DADADA] py-3 w-full rounded-lg flex items-center justify-center mt-3 font-semibold",onClick:()=>{},children:"Skip"})]})})]},s))}),(0,l.jsx)("div",{className:"w-full border-t-[1px] border-[#DADADA] my-14"})]}))}),(0,l.jsxs)("div",{className:"flex justify-around items-center bg-white backdrop-blur-xl shadow-md pt-3 fixed bottom-0 left-0 right-0 text-md pb-10 z-50 border-t-[1px] border-black/10",children:[(0,l.jsxs)("button",{className:"flex flex-col items-center ".concat("Lessons"===e?"text-[#0039FF]":" text-[#959595]"),onClick:()=>t("Lessons"),children:[(0,l.jsx)(a.G,{icon:r.FL8,size:"lg"}),(0,l.jsx)("span",{className:"text-[0.65rem] mt-1",children:"Lessons"})]}),(0,l.jsxs)("button",{className:"flex flex-col items-center ".concat("Chat"===e?"text-[#0039FF]":" text-[#959595]"),onClick:()=>t("Chat"),children:[(0,l.jsx)(a.G,{icon:r.lXL,size:"lg"}),(0,l.jsx)("span",{className:"text-[0.65rem] mt-1",children:"Chat"})]}),(0,l.jsxs)("button",{className:"flex flex-col items-center ".concat("Challenges"===e?"text-[#0039FF]":" text-[#959595]"),onClick:()=>t("Challenges"),children:[(0,l.jsx)(a.G,{icon:r.kWN,size:"lg"}),(0,l.jsx)("span",{className:"text-[0.65rem] mt-1",children:"Challenges"})]}),(0,l.jsxs)("button",{className:"flex flex-col items-center ".concat("Profile"===e?"text-[#0039FF]":" text-[#959595]"),onClick:()=>t("Profile"),children:[(0,l.jsx)(a.G,{icon:r.ILF,size:"lg"}),(0,l.jsx)("span",{className:"text-[0.65rem] mt-1",children:"Profile"})]})]})]})}}},function(e){e.O(0,[676,404,920,542,793,971,23,744],function(){return e(e.s=3958)}),_N_E=e.O()}]);