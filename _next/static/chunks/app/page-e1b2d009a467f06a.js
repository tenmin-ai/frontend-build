(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3958:function(e,t,s){Promise.resolve().then(s.bind(s,6774))},1980:function(e,t,s){"use strict";s.d(t,{AuthProvider:function(){return o},E:function(){return d}});var l=s(7437),n=s(2265),a=s(6463),r=s(750),c=s(3061);let i=(0,n.createContext)(void 0),o=e=>{let{children:t}=e,s=(0,c.useIsClient)(),[o,d]=(0,n.useState)([]),[x,m]=(0,n.useState)(null),[u,h]=(0,n.useState)([]),b="https://backend-us.tenmin.ai";(0,n.useEffect)(()=>{(async()=>{try{let e=await fetch(b+"/tutors"),t=await e.json();d(t.map(e=>({...e.tutor,lessons:e.lessons})))}catch(e){console.error("Error fetching data:",e)}})()},[b]);let[f,g]=(0,r._)("token","",{initializeWithValue:!1}),p=(0,a.useRouter)(),j=async e=>{try{let t=await fetch(b+"/user",{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}),s=await t.json();console.log(s),m(JSON.parse(s))}catch(e){console.error("Error fetching data:",e)}};return((0,n.useEffect)(()=>{f||p.push("/login"),j(f)},[f,p]),s)?(0,l.jsx)(i.Provider,{value:{token:f,saveToken:g,backend_url:"wss://backend-us.tenmin.ai/ws",tutors:o,user:x,fetchUserData:j,availableTutors:u,setAvailableTutors:h},children:t}):(0,l.jsx)("main",{className:"bg-[#0039FF] h-screen w-screen flex justify-center items-center",children:(0,l.jsx)("img",{src:"tenmin_new_logo_white.svg",alt:"",className:"w-10"})})},d=()=>{let e=(0,n.useContext)(i);if(!e)throw Error("useAuthContext must be used within an AuthProvider");return e}},6774:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var l=s(7437),n=s(2265),a=s(6920),r=s(5079),c=s(6463),i=s(1980),o=s(7826);function d(){let[e,t]=(0,n.useState)("Speak"),[s,d]=(0,n.useState)(!1),[x,m]=(0,n.useState)("German"),u=(0,c.useRouter)(),h="https://backend-us.tenmin.ai",{token:b,backend_url:f,tutors:g,user:p,availableTutors:j,setAvailableTutors:N}=(0,i.E)(),F=e=>{switch(e){case"German":return g.filter(e=>"de"===e.language);case"English":return g.filter(e=>"en-US"===e.language);default:return[]}};(0,n.useEffect)(()=>{p&&p.language&&(m(p.language),N(F(p.language)))},[p]);let w=async e=>{if(x===e)return;N(F(e));let t={language:e};console.log(JSON.stringify(t)),console.log(await fetch(h+"/update_user/"+p.id,{method:"PUT",headers:{accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}))},k=(e,t)=>{u.push("/callPage?lesson_id="+e+"&tutor_id="+t)};return(0,l.jsxs)("main",{className:"flex flex-col bg-gradient-to-b from-[#F6F8FF] to-[#F7F8FD] h-screen pt-14 pb-4 px-7 justify-between tracking-[-0.02em]",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("button",{className:"flex items-center",onClick:()=>d(!0),children:[(0,l.jsx)("div",{className:"text-black font-bold text-2xl mr-2",children:x}),(0,l.jsx)("div",{className:"text-sm",children:"â–¼"})]}),(0,l.jsxs)(o.y,{isOpen:s,onClose:()=>d(!1),detent:"content-height",tweenConfig:{ease:"easeInOut",duration:.3},children:[(0,l.jsxs)(o.y.Container,{children:[(0,l.jsx)(o.y.Header,{style:{background:"#F6F8FF"}}),(0,l.jsx)(o.y.Content,{style:{backgroundImage:"linear-gradient(to bottom, #F6F8FF, #F7F8FD)"},children:(0,l.jsxs)("div",{className:"p-8 pb-16 text-black",children:[(0,l.jsx)("p",{className:"font-bold text-2xl mb-7",children:"What would you like to learn?"}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("button",{className:"text-lg border-[1px] border-black/10 p-4 rounded-lg mb-4 bg-white",onClick:()=>{m("German"),w("German"),d(!1)},children:"\uD83C\uDDE9\uD83C\uDDEA German"}),(0,l.jsx)("button",{className:"text-lg border-[1px] border-black/10 p-4 rounded-lg mb-4 bg-white",onClick:()=>{m("English"),w("English"),d(!1)},children:"\uD83C\uDDEC\uD83C\uDDE7 English"})]})]})})]}),(0,l.jsx)(o.y.Backdrop,{onTap:()=>{d(!1)}})]}),(0,l.jsx)("div",{className:"font-semibold bg-[#63C7B2]/20 text-[#63C7B2] rounded-full py-1 px-4 border-2 border-[#63C7B2] text-normal",children:(0,l.jsx)(a.G,{icon:r.vqe})})]}),(0,l.jsx)("div",{className:"flex-1 overflow-y-auto mt-8 scrollbar-hide pb-20",children:j.map((e,t)=>(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"bg-white rounded-2xl py-6 px-6 mb-8 border-[1px] border-black/10",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("img",{src:e.profile_picture_url,alt:e.name,className:"w-20 h-20 rounded-full mr-7"}),(0,l.jsxs)("h3",{className:"flex flex-col text-xl font-semibold text-black items-start",children:[e.name,(0,l.jsx)("p",{className:"text-sm text-center text-[#0039FF] font-normal rounded-md bg-[#CCD7FF] px-3 py-1 mt-2",children:"AI-powered"})]})]}),(0,l.jsx)("p",{className:"text-base text-black mt-4 mb-4 ",children:e.description}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsxs)("button",{className:"text-white bg-[#0039FF] py-3 w-full rounded-full flex items-center justify-center",onClick:()=>{console.log(e.lessons),k(e.lessons[0].id,e._id)},children:[(0,l.jsx)(a.G,{icon:r.j1w,className:"mr-2"}),(0,l.jsx)("p",{className:"text-normal font-semibold",children:"Call"})]}),1===e.lessons.length?(0,l.jsx)("div",{}):(0,l.jsx)("button",{className:"bg-black bg-opacity-[0.12] py-2 px-4 rounded-full",onClick:async()=>{console.log("backend",h,b),await fetch(h+"/reset/"+e._id,{method:"POST",headers:{Authorization:"Bearer ".concat(b)}}),window.location.reload()},children:(0,l.jsx)(a.G,{icon:r.X7o,className:"text-lg mt-1"})})]})]},t),1===e.lessons.length?(0,l.jsxs)("div",{className:"bg-[#0039FF]/10 rounded-2xl py-6 px-6 mb-8 border-[1px] border-[#0039FF]/15 text-normal text-[#0039FF]",children:[(0,l.jsxs)("div",{className:"flex items-center mb-1 font-bold ",children:[(0,l.jsx)("img",{className:"mr-3",src:"/tenmin_new_logo.svg",alt:"Tenmin Logo"}),"Welcome, ",p.nickname,"!"]}),(0,l.jsx)("div",{children:"Get started by calling your tutor to generate your lesson plan!"})]},"asdfasdf"):(0,l.jsxs)("div",{className:"grid",children:[(0,l.jsx)("div",{className:"h-full border-l-[1.5px] border-[#DADADA] relative col-start-1 row-start-1 mx-6 z-0"}),(0,l.jsx)("div",{className:"col-start-1 row-start-1 z-10",children:e.lessons.map((t,s)=>(0,l.jsxs)("div",{className:"flex items-center mb-4",children:[(0,l.jsx)("div",{children:(0,l.jsx)("div",{className:" mx-2 text-[#000000]/30 w-8",children:(0,l.jsxs)("div",{className:"".concat(0===s?"text-[#0039FF]":""," bg-[#F6F8FF] py-1 pt-2 flex flex-col items-center"),children:[(0,l.jsx)("p",{className:"text-[0.65rem] leading-[0.5rem] font-medium",children:"DAY"}),(0,l.jsx)("p",{className:"text-xl font-bold",children:(s+1).toString().padStart(2,"0")})]})})}),(0,l.jsxs)("button",{className:"flex flex-col bg-white rounded-2xl py-6 px-8 border-[1px] border-[#DADADA] w-full text-normal items-start",onClick:()=>k(t.id,e._id),children:[(0,l.jsxs)("p",{className:"text-black font-bold",children:["Lesson ",s+1]}),(0,l.jsx)("p",{className:"text-black text-left line-clamp-2",children:t.title})]},s)]}))})]}),(0,l.jsx)("div",{className:"w-full border-t-[1px] border-[#DADADA] my-14"})]}))}),(0,l.jsxs)("div",{className:"flex justify-around items-center bg-white backdrop-blur-xl shadow-md pt-3 fixed bottom-0 left-0 right-0 text-md pb-10 z-50 border-t-[1px] border-black/10",children:[(0,l.jsxs)("button",{className:"flex flex-col items-center ".concat("Lessons"===e?"text-[#0039FF]":" text-[#959595]"),onClick:()=>t("Lessons"),children:[(0,l.jsx)(a.G,{icon:r.FL8,size:"lg"}),(0,l.jsx)("span",{className:"text-[0.65rem] mt-1",children:"Lessons"})]}),(0,l.jsxs)("button",{className:"flex flex-col items-center ".concat("Chat"===e?"text-[#0039FF]":" text-[#959595]"),onClick:()=>t("Chat"),children:[(0,l.jsx)(a.G,{icon:r.lXL,size:"lg"}),(0,l.jsx)("span",{className:"text-[0.65rem] mt-1",children:"Chat"})]}),(0,l.jsxs)("button",{className:"flex flex-col items-center ".concat("Challenges"===e?"text-[#0039FF]":" text-[#959595]"),onClick:()=>t("Challenges"),children:[(0,l.jsx)(a.G,{icon:r.kWN,size:"lg"}),(0,l.jsx)("span",{className:"text-[0.65rem] mt-1",children:"Challenges"})]}),(0,l.jsxs)("button",{className:"flex flex-col items-center ".concat("Profile"===e?"text-[#0039FF]":" text-[#959595]"),onClick:()=>t("Profile"),children:[(0,l.jsx)(a.G,{icon:r.ILF,size:"lg"}),(0,l.jsx)("span",{className:"text-[0.65rem] mt-1",children:"Profile"})]})]})]})}}},function(e){e.O(0,[676,404,920,826,971,23,744],function(){return e(e.s=3958)}),_N_E=e.O()}]);